# CSI Ratios Multi-Year Data UI/UX Analysis & Recommendations

**Document Version:** 1.0
**Date:** 2025-12-29
**Component:** CSI Operating Ratios Panel
**File:** `/src/app/(dashboard)/financials/page.tsx` (lines 1656-1931)

---

## Executive Summary

This document provides comprehensive UI/UX recommendations for enhancing the CSI Operating Ratios dashboard to support multi-year analysis (2024 historical + 2025 forecast/actual mix). The current implementation displays only single-month snapshots. The recommendations below draw from best practices observed in Bloomberg Terminal, Tableau, Power BI, Stripe Dashboard, Linear, and modern SaaS financial analytics platforms.

**Priority Classification:**
- ğŸ”´ **Critical** - Core functionality for multi-year analysis
- ğŸŸ¡ **Important** - Significant UX improvements
- ğŸŸ¢ **Enhancement** - Polish and advanced features

---

## Current State Analysis

### Strengths
âœ“ Clean, colour-coded status system (green/amber/red)
âœ“ Clear target indicators and progress bars
âœ“ Well-structured ratio cards with formulas
âœ“ Underlying financial data breakdown
âœ“ Summary badges for quick status overview

### Limitations
âœ— No historical trend visualisation
âœ— No year-over-year comparison
âœ— No forecast vs actual distinction
âœ— Single point-in-time view only
âœ— No drill-down to monthly data
âœ— No variance analysis
âœ— No automatic insights or alerts

---

## 1. Year-over-Year Comparison Views

### ğŸ”´ Critical: Dual-Year Comparison Mode

**Current Pattern Reference:** Similar to BURC pipeline cards (lines 400-437)

**Recommendation:** Implement a split-view comparison mode that shows 2024 vs 2025 side-by-side.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CSI Operating Ratios                     [2024 vs 2025] [Trend] [Table]â”‚
â”‚  Comparing Dec 2024 (Actual) vs Dec 2025 (Forecast)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚      PS RATIO - 2024     â”‚  â”‚      PS RATIO - 2025     â”‚            â”‚
â”‚  â”‚                          â”‚  â”‚                          â”‚            â”‚
â”‚  â”‚         2.34 âœ“           â”‚  â”‚         2.56 âœ“           â”‚            â”‚
â”‚  â”‚      [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 117%   â”‚  â”‚      [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘] 128%   â”‚            â”‚
â”‚  â”‚                          â”‚  â”‚                          â”‚            â”‚
â”‚  â”‚  Target: â‰¥ 2.0           â”‚  â”‚  Target: â‰¥ 2.0           â”‚            â”‚
â”‚  â”‚                          â”‚  â”‚  â†‘ +9.4% YoY             â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                         â”‚
â”‚  [Repeat for all 5 ratios...]                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation Notes:**
- Use CSS Grid with `grid-template-columns: repeat(2, 1fr)` for responsive layout
- Add year-over-year delta badges (e.g., "â†‘ +9.4% YoY") in green/red
- Maintain existing colour coding but add a subtle border to indicate comparison mode
- Reference: Stripe Dashboard's metric comparison cards

---

### ğŸŸ¡ Important: Year-to-Date (YTD) Comparison

**Pattern:** Add a YTD summary row showing average performance to date.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  YTD Performance (Jan - Dec)                                  [Collapse]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Metric   â”‚ 2024 YTD â”‚ 2025 YTD â”‚ Variance â”‚ Target   â”‚ Status           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PS Ratio â”‚   2.18   â”‚   2.31   â”‚  +5.9%   â”‚  â‰¥ 2.0   â”‚ â— Met (both)     â”‚
â”‚ Sales    â”‚   0.94   â”‚   1.02   â”‚  +8.5%   â”‚  â‰¥ 1.0   â”‚ â— Met (2025)     â”‚
â”‚ Maint    â”‚   4.12   â”‚   4.28   â”‚  +3.8%   â”‚  â‰¥ 4.0   â”‚ â— Met (both)     â”‚
â”‚ R&D      â”‚   0.88   â”‚   0.96   â”‚  +9.1%   â”‚  â‰¥ 1.0   â”‚ â—‹ Near (both)    â”‚
â”‚ G&A      â”‚  18.3%   â”‚  17.1%   â”‚  -6.5%   â”‚  â‰¤ 20%   â”‚ â— Met (both)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Specifications:**
- Font: Use `tabular-nums` for all numeric columns (already in codebase)
- Variance colouring: Green for improvements, red for declines
- Status indicators: Filled circle (â—) for "Met", empty circle (â—‹) for "Near"
- Collapsible section to save space when not needed
- Reference: Bloomberg Terminal's YTD comparison tables

---

### ğŸŸ¢ Enhancement: Full-Year Trend View

**Pattern:** Expandable 12-month trend cards showing monthly progression.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PS Ratio Annual Trend                                       [Expand â–¼] â”‚
â”‚                                                                         â”‚
â”‚  Current: 2.56 (Dec 2025) â€¢ Average: 2.31 â€¢ Best: 2.64 (Oct)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ 3.0 â”¤                                          â—         â”‚           â”‚
â”‚  â”‚ 2.5 â”¤        â—â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â”´â”€â”€â”€â”€â—   â”‚ Target    â”‚
â”‚  â”‚ 2.0 â”¼â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€  â”‚           â”‚
â”‚  â”‚ 1.5 â”¤  â—â”€â”€â”€â”€â”€â—                                           â”‚           â”‚
â”‚  â”‚     â””â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€           â”‚
â”‚  â”‚      Jan   Mar   May   Jul   Sep   Nov   Jan   Mar   May â”‚           â”‚
â”‚  â”‚      2024                     2024   2025         2025    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  Legend: â”€â”€â”€ 2024 Actual  â”€â”€â”€ 2025 Forecast  â— Actual data             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation Notes:**
- Use **Recharts** `<LineChart>` with `connectNulls={false}` to show data gaps
- Add `strokeDasharray="5 5"` for forecast portions
- Include horizontal reference line for target threshold
- Tooltip showing actual values + variance from target
- Reference: Tableau's dual-axis time series charts

---

## 2. Forecast vs Actual Indicators

### ğŸ”´ Critical: Data Type Badges

**Recommendation:** Add visual badges to distinguish actual vs forecast data.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PS Ratio                                               [ACTUAL] Target â”‚
â”‚                                                                    â‰¥ 2.0 â”‚
â”‚  2.56                                                                   â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘] 128%                                                  â”‚
â”‚                                                                         â”‚
â”‚  Professional Services efficiency                                      â”‚
â”‚  PS Revenue Ã· PS OPEX                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**vs**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PS Ratio                                             [FORECAST] Target â”‚
â”‚                                                                    â‰¥ 2.0 â”‚
â”‚  2.78                                                                   â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–’] 139%          Â±0.15 confidence range                 â”‚
â”‚                                                                         â”‚
â”‚  Professional Services efficiency                                      â”‚
â”‚  PS Revenue Ã· PS OPEX                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Specifications:**
- **Actual badge:** Solid background `bg-blue-500 text-white`, 10px uppercase
- **Forecast badge:** Dashed border `border-2 border-dashed border-purple-500 text-purple-700`
- Add subtle opacity (80%) to forecast cards: `opacity-80`
- Include confidence range for forecasts (e.g., "Â±0.15")
- Reference: Linear's issue status badges

---

### ğŸŸ¡ Important: Variance Tracking Panel

**Recommendation:** Add a dedicated section showing forecast accuracy as actuals come in.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Forecast vs Actual Performance (2025)                                 â”‚
â”‚  Showing months where actual data is available                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Month    â”‚ Forecast â”‚ Actual   â”‚ Variance â”‚ Status                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Jan 2025 â”‚   2.40   â”‚   2.38   â”‚  -0.83%  â”‚ â— Within tolerance (<5%)     â”‚
â”‚ Feb 2025 â”‚   2.42   â”‚   2.51   â”‚  +3.72%  â”‚ â— Within tolerance           â”‚
â”‚ Mar 2025 â”‚   2.45   â”‚   2.31   â”‚  -5.71%  â”‚ âš  Outside tolerance (>5%)    â”‚
â”‚ Apr 2025 â”‚   2.48   â”‚   2.46   â”‚  -0.81%  â”‚ â— Within tolerance           â”‚
â”‚ May 2025 â”‚   2.50   â”‚  [TBD]   â”‚    -     â”‚ â³ Pending actual data        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Forecast Accuracy: 89% (3 of 4 within Â±5% tolerance)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Specifications:**
- Variance colouring: Green (<3%), Amber (3-5%), Red (>5%)
- Include running accuracy score
- Sortable by variance magnitude
- Reference: Power BI's forecast accuracy tables

---

### ğŸŸ¢ Enhancement: Confidence Interval Visualisation

**Pattern:** Show uncertainty ranges for forecast data using band charts.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PS Ratio Forecast Confidence (2025)                                   â”‚
â”‚                                                                         â”‚
â”‚  3.0 â”¤                                                                  â”‚
â”‚  2.8 â”¤                        â•±â–“â–“â–“â–“â–“â–“â–“â–“â•²                                â”‚
â”‚  2.6 â”¤              â•±â–“â–“â–“â–“â–“â–“â–“â–“â•±          â•²â–“â–“â–“â–“â•²                          â”‚
â”‚  2.4 â”¤    â—â”€â”€â”€â”€â—â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â—   Upper (P90)       â”‚
â”‚  2.2 â”¤    â”‚    â”‚   â”‚                         â”‚   â”‚   Forecast          â”‚
â”‚  2.0 â”¼â”€ â”€ â— â”€ â— â”€ â— â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â— â”€ â— â”€ Target             â”‚
â”‚  1.8 â”¤    â•²â–“â–“â–“â–“â•²   â•²â–“â–“â–“â–“â–“â–“â–“â–“â•²          â•±â–“â–“â–“â–“â•±   Lower (P10)           â”‚
â”‚      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€                       â”‚
â”‚          Jan  Feb Mar  Apr  May  Jun  Jul  Aug Sep                      â”‚
â”‚                                                                         â”‚
â”‚  Shaded area: 80% confidence interval (P10-P90)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation Notes:**
- Use Recharts `<Area>` with `fillOpacity={0.3}` for confidence bands
- Requires backend to provide P10/P50/P90 forecast values
- Reference: Bloomberg Terminal's scenario analysis charts

---

## 3. Trend Visualisation

### ğŸ”´ Critical: Inline Sparklines in Ratio Cards

**Recommendation:** Add small trend charts directly in each ratio card.

**Current Card (Static):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PS RATIO         â‰¥ 2.0  â”‚
â”‚                          â”‚
â”‚  2.56                    â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘] 128%       â”‚
â”‚                          â”‚
â”‚  Professional Services   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Enhanced Card (With Sparkline):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PS RATIO         â‰¥ 2.0  â”‚
â”‚                          â”‚
â”‚  2.56           â•±â–€â–€â•²     â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘]  â•±    â–€â•²_  â”‚  â† 12-month trend
â”‚  128%         â–€        â–€ â”‚
â”‚                          â”‚
â”‚  â†‘ +12% vs last year     â”‚
â”‚  Professional Services   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation Notes:**
- Use **react-sparklines** (already in dependencies)
- Height: 40px, width: 80px
- Show last 12 months of data
- No axes or labels (just the trend line)
- Colour matches status (green/amber/red)
- Reference: Stripe Dashboard's metric cards

**Code Example:**
```typescript
import { Sparklines, SparklinesLine } from 'react-sparklines'

// Inside ratio card
<Sparklines data={ratio.last12Months} height={40} width={80}>
  <SparklinesLine
    color={ratio.status === 'green' ? '#22c55e' : ratio.status === 'amber' ? '#f59e0b' : '#ef4444'}
    style={{ strokeWidth: 2 }}
  />
</Sparklines>
```

---

### ğŸŸ¡ Important: Monthly Trend Chart Modal

**Pattern:** Click any ratio card to open detailed monthly breakdown.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PS Ratio - Monthly Breakdown                                     [âœ•]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  3.0 â”¤                                                        â—         â”‚
â”‚  2.8 â”¤                                              â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚  2.6 â”¤                                    â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  2.4 â”¤                          â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚  2.2 â”¤                â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚  2.0 â”¼â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€â—â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€    â”‚
â”‚  1.8 â”¤      â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚  1.6 â”¤â—â”€â”€â”€â”€â”€â”˜                                                           â”‚
â”‚      â””â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€ â”‚
â”‚       Jan   Mar   May   Jul   Sep   Nov   Jan   Mar   May   Jul   Sep  â”‚
â”‚       2024                     2024   2025               2025   2025    â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Monthly Data Table                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Month  â”‚ PS Rev   â”‚ PS OPEX  â”‚ Ratio    â”‚ Target   â”‚ Status            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Jan 24 â”‚  $2.1M   â”‚  $1.3M   â”‚   1.62   â”‚  â‰¥ 2.0   â”‚ â—‹ Below          â”‚
â”‚ Feb 24 â”‚  $2.3M   â”‚  $1.4M   â”‚   1.64   â”‚  â‰¥ 2.0   â”‚ â—‹ Below          â”‚
â”‚ ...    â”‚   ...    â”‚   ...    â”‚   ...    â”‚   ...    â”‚  ...             â”‚
â”‚ Dec 25 â”‚  $3.2M   â”‚  $1.25M  â”‚   2.56   â”‚  â‰¥ 2.0   â”‚ â— Met            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                   [Export CSV] [Print] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation Notes:**
- Use Radix UI Dialog (already in dependencies)
- Recharts `<LineChart>` with `<CartesianGrid>` and `<Tooltip>`
- Include both chart and table views (tabbed interface)
- Export to CSV using existing patterns
- Reference: Notion's database full-page modals

---

### ğŸŸ¢ Enhancement: Heat Map Calendar View

**Pattern:** Show at-a-glance performance across all months/ratios.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CSI Ratios Heat Map                                  [2024] [2025] [Both]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              Jan  Feb  Mar  Apr  May  Jun  Jul  Aug  Sep  Oct  Nov  Dec â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PS Ratio     ğŸŸ¥  ğŸŸ¥  ğŸŸ¨  ğŸŸ¨  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©           â”‚
â”‚ Sales Ratio  ğŸŸ¥  ğŸŸ¥  ğŸŸ¥  ğŸŸ¨  ğŸŸ¨  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©           â”‚
â”‚ Maint Ratio  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©           â”‚
â”‚ R&D Ratio    ğŸŸ¨  ğŸŸ¨  ğŸŸ¨  ğŸŸ¨  ğŸŸ¨  ğŸŸ¨  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©           â”‚
â”‚ G&A Ratio    ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ©  ğŸŸ¨  ğŸŸ¨           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Legend: ğŸŸ© Met Target  ğŸŸ¨ Within 10%  ğŸŸ¥ Below Target                    â”‚
â”‚ Click any cell for detailed breakdown                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Specifications:**
- Cells: 40px Ã— 40px, rounded corners (8px)
- Hover: Tooltip with exact values
- Click: Jump to monthly detail modal
- Use CSS Grid for layout
- Reference: GitHub's contribution graph

**Colour Palette:**
- ğŸŸ© Green (met): `#10b981` (green-500)
- ğŸŸ¨ Amber (near): `#f59e0b` (amber-500)
- ğŸŸ¥ Red (below): `#ef4444` (red-500)
- â¬œ Grey (no data): `#e5e7eb` (gray-200)

---

## 4. Drill-Down Capabilities

### ğŸ”´ Critical: Interactive Month Selector

**Current:** Year selector only (lines 1762-1770)

**Enhanced:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CSI Operating Ratios                                                   â”‚
â”‚  Harris/CSI efficiency metrics                                          â”‚
â”‚                                                                         â”‚
â”‚  [2025 â–¼]  [December â–¼]    [â† Nov] [Dec 2025] [Jan â†’]                 â”‚
â”‚                                                                         â”‚
â”‚  Compare with: [None â–¼] [Same month last year] [Previous month]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation Notes:**
- Month navigation arrows for quick browsing
- "Compare with" dropdown for instant comparisons
- Keyboard shortcuts: Left/Right arrows for month navigation
- URL state management for shareable links (e.g., `?year=2025&month=12`)
- Reference: Figma's version history navigation

---

### ğŸŸ¡ Important: Underlying Data Drill-Down

**Current:** Static underlying data display (lines 1849-1928)

**Enhanced:** Make each line item clickable for detailed breakdown.

**Before Click:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Net Revenue                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Licence                                                    $4.2M       â”‚
â”‚  Professional Services                                      $3.2M       â”‚
â”‚  Maintenance                                                $5.1M       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**After Click (PS Revenue):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Professional Services Revenue - December 2025                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Total: $3.2M                                                          â”‚
â”‚                                                                         â”‚
â”‚  Breakdown:                                                             â”‚
â”‚    Implementation Services     $1.8M    (56%)                          â”‚
â”‚    Training                     $0.9M    (28%)                          â”‚
â”‚    Consulting                   $0.5M    (16%)                          â”‚
â”‚                                                                         â”‚
â”‚  12-Month Trend:                                                        â”‚
â”‚    â•±â–€â–€â•²                                                                 â”‚
â”‚   â•±    â–€â•²_    Average: $2.9M                                           â”‚
â”‚  â–€        â–€                                                             â”‚
â”‚                                                                         â”‚
â”‚  [View Client Breakdown] [Export Details]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation Notes:**
- Use Radix Popover for lightweight drill-down
- Show category breakdown + mini trend chart
- Link to detailed reports
- Reference: Linear's issue detail panels

---

### ğŸŸ¢ Enhancement: Export & Reporting

**Pattern:** Add comprehensive export options.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Export Options                                                    [âœ•] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Format:                                                                â”‚
â”‚  â—‹ CSV (Spreadsheet)                                                    â”‚
â”‚  â— PDF (Report with charts)                                            â”‚
â”‚  â—‹ Excel (Detailed workbook)                                           â”‚
â”‚  â—‹ PowerPoint (Executive summary)                                      â”‚
â”‚                                                                         â”‚
â”‚  Date Range:                                                            â”‚
â”‚  [Jan 2024 â–¼]  to  [Dec 2025 â–¼]                                       â”‚
â”‚                                                                         â”‚
â”‚  Include:                                                               â”‚
â”‚  â˜‘ Ratio trends (charts)                                               â”‚
â”‚  â˜‘ Monthly data tables                                                 â”‚
â”‚  â˜‘ Underlying financials                                               â”‚
â”‚  â˜‘ Variance analysis                                                   â”‚
â”‚  â˜ Commentary notes                                                    â”‚
â”‚                                                                         â”‚
â”‚                                [Cancel]  [Generate Report]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation Notes:**
- Use existing `jspdf` + `html2canvas` libraries (in dependencies)
- Excel export via `xlsx` library (in dependencies)
- PowerPoint via `docx` library (in dependencies)
- Include branding/logos in exports
- Reference: Tableau's export modal

---

## 5. Key Metrics Dashboard Additions

### ğŸ”´ Critical: Overall Health Score Card

**Pattern:** Add a summary card showing aggregate performance.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Overall CSI Health Score                          â”‚
â”‚                                                                         â”‚
â”‚                              82/100                                     â”‚
â”‚                          [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘]                                   â”‚
â”‚                                                                         â”‚
â”‚  âœ“ 3 of 5 targets met this month                                       â”‚
â”‚  â†‘ +8 points vs last month                                             â”‚
â”‚  â†‘ +14 points vs same month last year                                  â”‚
â”‚                                                                         â”‚
â”‚  Breakdown:                                                             â”‚
â”‚    PS Ratio: âœ“ Met (28% of score)                                      â”‚
â”‚    Sales Ratio: âš  Near (18% of score)                                  â”‚
â”‚    Maintenance: âœ“ Met (24% of score)                                   â”‚
â”‚    R&D Ratio: âš  Near (16% of score)                                    â”‚
â”‚    G&A Ratio: âœ“ Met (14% of score)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Calculation Logic:**
```typescript
// Weighted scoring system
const weights = {
  ps: 0.28,      // Highest revenue impact
  sales: 0.18,
  maintenance: 0.24,
  rd: 0.16,
  ga: 0.14
}

function calculateHealthScore(ratios: CSIRatios): number {
  let score = 0

  // PS Ratio (target â‰¥ 2.0)
  score += Math.min(100, (ratios.ps.value / 2.0) * 100) * weights.ps

  // Sales Ratio (target â‰¥ 1.0)
  score += Math.min(100, (ratios.sales.value / 1.0) * 100) * weights.sales

  // Maintenance (target â‰¥ 4.0)
  score += Math.min(100, (ratios.maintenance.value / 4.0) * 100) * weights.maintenance

  // R&D (target â‰¥ 1.0)
  score += Math.min(100, (ratios.rd.value / 1.0) * 100) * weights.rd

  // G&A (target â‰¤ 20%, inverted)
  score += Math.min(100, (20 / Math.max(ratios.ga.value, 1)) * 100) * weights.ga

  return Math.round(score)
}
```

**Design Specifications:**
- Large number (48px font) with circular progress indicator
- Month-over-month and year-over-year deltas
- Breakdown shows weighted contribution
- Reference: Stripe's API health dashboard

---

### ğŸŸ¡ Important: Rolling Averages Section

**Pattern:** Add cards showing 3/6/12-month rolling averages.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Rolling Averages                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   3-Month Avg      â”‚   6-Month Avg      â”‚   12-Month Avg                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PS:     2.48 âœ“    â”‚  PS:     2.39 âœ“    â”‚  PS:     2.18 âœ“               â”‚
â”‚  Sales:  0.98 âš     â”‚  Sales:  0.94 âœ—    â”‚  Sales:  0.89 âœ—               â”‚
â”‚  Maint:  4.31 âœ“    â”‚  Maint:  4.28 âœ“    â”‚  Maint:  4.12 âœ“               â”‚
â”‚  R&D:    0.94 âš     â”‚  R&D:    0.91 âš     â”‚  R&D:    0.86 âš                â”‚
â”‚  G&A:   17.2% âœ“    â”‚  G&A:   17.8% âœ“    â”‚  G&A:   18.5% âœ“               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation Notes:**
- Calculate averages on frontend or backend (recommend backend for performance)
- Show trend arrows (â†‘â†“â†’) comparing to previous period
- Use consistent colour coding
- Reference: Power BI's key influencers visual

---

### ğŸŸ¢ Enhancement: Best/Worst Performing Months

**Pattern:** Highlight extremes for pattern recognition.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Performance Extremes (Last 24 Months)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ† Best Months                â”‚  âš ï¸ Worst Months                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PS Ratio                      â”‚  PS Ratio                              â”‚
â”‚    Oct 2025: 2.64              â”‚    Jan 2024: 1.62                      â”‚
â”‚    Sep 2025: 2.61              â”‚    Feb 2024: 1.64                      â”‚
â”‚                                â”‚                                        â”‚
â”‚  Sales Ratio                   â”‚  Sales Ratio                           â”‚
â”‚    Nov 2025: 1.08              â”‚    Jan 2024: 0.72                      â”‚
â”‚    Dec 2025: 1.04              â”‚    Mar 2024: 0.78                      â”‚
â”‚                                â”‚                                        â”‚
â”‚  Overall Health                â”‚  Overall Health                        â”‚
â”‚    Oct 2025: 88/100            â”‚    Jan 2024: 62/100                    â”‚
â”‚    Nov 2025: 86/100            â”‚    Feb 2024: 64/100                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Specifications:**
- Top 2 best and worst for each ratio
- Click month to jump to that period
- Include seasonality indicators (e.g., "Q1 pattern")
- Reference: Google Analytics' anomaly detection

---

## 6. Comparison Tables

### ğŸ”´ Critical: Side-by-Side Year Comparison Table

**Pattern:** Comprehensive table view for detailed analysis.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Year-over-Year Comparison                        [Sort by: Improvement â–¼] [Export CSV]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Month  â”‚ 2024 PS  â”‚ 2025 PS  â”‚ Î” PS     â”‚ 2024 Salesâ”‚ 2025 Salesâ”‚ Î” Sales â”‚ ... (all)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Jan    â”‚   1.62   â”‚   2.38   â”‚ +46.9% â†‘ â”‚   0.72   â”‚   0.94   â”‚ +30.6% â†‘ â”‚  ...        â”‚
â”‚ Feb    â”‚   1.64   â”‚   2.42   â”‚ +47.6% â†‘ â”‚   0.78   â”‚   0.96   â”‚ +23.1% â†‘ â”‚  ...        â”‚
â”‚ Mar    â”‚   1.89   â”‚   2.45   â”‚ +29.6% â†‘ â”‚   0.82   â”‚   0.98   â”‚ +19.5% â†‘ â”‚  ...        â”‚
â”‚ Apr    â”‚   1.92   â”‚   2.48   â”‚ +29.2% â†‘ â”‚   0.85   â”‚   1.01   â”‚ +18.8% â†‘ â”‚  ...        â”‚
â”‚ May    â”‚   2.01   â”‚   2.50   â”‚ +24.4% â†‘ â”‚   0.88   â”‚   1.03   â”‚ +17.0% â†‘ â”‚  ...        â”‚
â”‚ Jun    â”‚   2.08   â”‚   2.52   â”‚ +21.2% â†‘ â”‚   0.91   â”‚   1.05   â”‚ +15.4% â†‘ â”‚  ...        â”‚
â”‚ Jul    â”‚   2.15   â”‚   2.54   â”‚ +18.1% â†‘ â”‚   0.93   â”‚   1.06   â”‚ +14.0% â†‘ â”‚  ...        â”‚
â”‚ Aug    â”‚   2.22   â”‚   2.56   â”‚ +15.3% â†‘ â”‚   0.96   â”‚   1.08   â”‚ +12.5% â†‘ â”‚  ...        â”‚
â”‚ Sep    â”‚   2.31   â”‚   2.61   â”‚ +13.0% â†‘ â”‚   0.98   â”‚   1.09   â”‚ +11.2% â†‘ â”‚  ...        â”‚
â”‚ Oct    â”‚   2.38   â”‚   2.64   â”‚ +10.9% â†‘ â”‚   1.01   â”‚   1.11   â”‚  +9.9% â†‘ â”‚  ...        â”‚
â”‚ Nov    â”‚   2.42   â”‚   2.62   â”‚  +8.3% â†‘ â”‚   1.03   â”‚   1.09   â”‚  +5.8% â†‘ â”‚  ...        â”‚
â”‚ Dec    â”‚   2.34   â”‚   2.56   â”‚  +9.4% â†‘ â”‚   1.05   â”‚   1.04   â”‚  -1.0% â†“ â”‚  ...        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Avg    â”‚   2.08   â”‚   2.52   â”‚ +21.2%   â”‚   0.91   â”‚   1.04   â”‚ +14.3%   â”‚  ...        â”‚
â”‚ Best   â”‚   2.42   â”‚   2.64   â”‚   -      â”‚   1.05   â”‚   1.11   â”‚   -      â”‚  ...        â”‚
â”‚ Worst  â”‚   1.62   â”‚   2.38   â”‚   -      â”‚   0.72   â”‚   0.94   â”‚   -      â”‚  ...        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Sortable by any column (click header)
- Fixed first column (month) when scrolling horizontally
- Conditional formatting: Green (>10% improvement), Amber (0-10%), Red (decline)
- Sticky header when scrolling vertically
- Export to CSV/Excel
- Reference: Airtable's grid view

**Implementation:**
```typescript
// Use @tanstack/react-virtual for performance with large datasets
import { useVirtualizer } from '@tanstack/react-virtual'

// Sticky header: className="sticky top-0 z-10 bg-white"
// Fixed column: className="sticky left-0 z-20 bg-white"
```

---

### ğŸŸ¡ Important: Quarterly Summary Table

**Pattern:** Roll up monthly data into quarterly views.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Quarterly Performance Summary                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Quarter  â”‚ PS Ratio â”‚ Sales    â”‚ Maint    â”‚ R&D      â”‚ G&A      â”‚ Score â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Q1 2024  â”‚   1.72   â”‚   0.77   â”‚   4.08   â”‚   0.84   â”‚  19.2%   â”‚  68   â”‚
â”‚ Q2 2024  â”‚   2.00   â”‚   0.88   â”‚   4.14   â”‚   0.88   â”‚  18.8%   â”‚  76   â”‚
â”‚ Q3 2024  â”‚   2.23   â”‚   0.96   â”‚   4.18   â”‚   0.91   â”‚  18.4%   â”‚  82   â”‚
â”‚ Q4 2024  â”‚   2.38   â”‚   1.03   â”‚   4.22   â”‚   0.94   â”‚  18.1%   â”‚  86   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Q1 2025  â”‚   2.42   â”‚   0.97   â”‚   4.26   â”‚   0.96   â”‚  17.8%   â”‚  84   â”‚
â”‚ Q2 2025  â”‚   2.51   â”‚   1.03   â”‚   4.31   â”‚   0.98   â”‚  17.4%   â”‚  88   â”‚
â”‚ Q3 2025  â”‚   2.60   â”‚   1.08   â”‚   4.35   â”‚   1.01   â”‚  17.0%   â”‚  92   â”‚
â”‚ Q4 2025  â”‚   2.61   â”‚   1.06   â”‚   4.38   â”‚   1.03   â”‚  16.8%   â”‚  91   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ YoY Î”    â”‚ +9.7%    â”‚ +2.9%    â”‚ +3.8%    â”‚ +9.6%    â”‚  -7.2%   â”‚  +6%  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Specifications:**
- Calculate quarterly averages from monthly data
- Show year-over-year delta in bottom row
- Add sparklines in each cell for intra-quarter trend
- Reference: Financial statement layouts (10-Q format)

---

### ğŸŸ¢ Enhancement: Rank-Based Comparison

**Pattern:** Show how each month ranks historically.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Historical Rankings (Out of 24 months)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ December 2025        â”‚  Rank                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PS Ratio: 2.56       â”‚  #6 of 24   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ (Top 25%)    â”‚
â”‚ Sales Ratio: 1.04    â”‚  #8 of 24   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ (Top 33%)    â”‚
â”‚ Maint Ratio: 4.38    â”‚  #2 of 24   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ (Top 8%)     â”‚
â”‚ R&D Ratio: 1.03      â”‚  #3 of 24   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ (Top 12%)    â”‚
â”‚ G&A Ratio: 16.8%     â”‚  #1 of 24   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ (Best)       â”‚
â”‚ Overall Score: 91    â”‚  #4 of 24   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘ (Top 17%)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation Notes:**
- Calculate percentile rankings
- Visual progress bars for quick scanning
- Highlight #1 ranks with badge
- Reference: Strava's performance analysis

---

## 7. Alert/Insight Panels

### ğŸ”´ Critical: Automated Insights Section

**Pattern:** AI-generated or rule-based insights at top of page.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Key Insights for December 2025                                   [âœ•] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¡ Top Insight                                                         â”‚
â”‚  PS Ratio improved 9.4% year-over-year, marking the 6th consecutive     â”‚
â”‚  month of YoY growth. You're now in the top 25% of historical months.   â”‚
â”‚                                                                         â”‚
â”‚  ğŸ“Š Performance Highlights                                              â”‚
â”‚  â€¢ Maintenance Ratio hit 4.38 - your 2nd best month ever               â”‚
â”‚  â€¢ G&A Ratio at 16.8% - best performance on record                     â”‚
â”‚  â€¢ 3 of 5 targets met (same as November)                               â”‚
â”‚                                                                         â”‚
â”‚  âš ï¸ Areas to Watch                                                      â”‚
â”‚  â€¢ Sales Ratio declined 1.0% vs last year - first YoY decline in 8m    â”‚
â”‚  â€¢ R&D Ratio remains 3% below target despite improvement               â”‚
â”‚                                                                         â”‚
â”‚  ğŸ¯ Forecast Accuracy                                                   â”‚
â”‚  Your December forecast was 97% accurate - actual values within 3%     â”‚
â”‚  of predictions across all ratios.                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation Notes:**
- Generate insights via backend API endpoint
- Use pattern matching for common scenarios
- Allow dismissal but persist for session
- Update in real-time when month/year changes
- Reference: Google Analytics' insights cards

**Insight Generation Logic:**
```typescript
function generateInsights(currentData: CSIRatiosData, historicalData: CSIRatiosData[]): Insight[] {
  const insights: Insight[] = []

  // YoY comparison insights
  const yoyDelta = calculateYoYDelta(currentData, historicalData)
  if (yoyDelta.ps > 5) {
    insights.push({
      type: 'positive',
      category: 'yoy',
      title: 'Strong Year-over-Year Growth',
      description: `PS Ratio improved ${yoyDelta.ps.toFixed(1)}% year-over-year...`
    })
  }

  // Streak detection
  const streak = detectStreak(historicalData, 'ps', 'improving')
  if (streak >= 3) {
    insights.push({
      type: 'positive',
      category: 'streak',
      title: 'Sustained Improvement',
      description: `PS Ratio has improved YoY for ${streak} consecutive months`
    })
  }

  // Anomaly detection
  const anomalies = detectAnomalies(currentData, historicalData)
  anomalies.forEach(a => insights.push(a))

  // Ranking insights
  const ranking = calculateHistoricalRanking(currentData, historicalData)
  if (ranking <= 3) {
    insights.push({
      type: 'positive',
      category: 'ranking',
      title: 'Top-Tier Performance',
      description: `This month ranks #${ranking} out of ${historicalData.length} months`
    })
  }

  return insights
}
```

---

### ğŸŸ¡ Important: Threshold Alert System

**Pattern:** Proactive warnings when ratios approach/breach thresholds.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Active Alerts (2)                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš ï¸ WARNING - Sales Ratio Declining                                     â”‚
â”‚  The Sales Ratio has declined for 2 consecutive months. If the trend    â”‚
â”‚  continues, you may fall below the 1.0 target by February 2026.         â”‚
â”‚                                                                         â”‚
â”‚  Current: 1.04  â”‚  Trend: â†“ -1.8% per month  â”‚  Forecast Mar: 0.98     â”‚
â”‚                                                                         â”‚
â”‚  Recommended Actions:                                                   â”‚
â”‚  â€¢ Review S&M OPEX spending vs budget                                   â”‚
â”‚  â€¢ Analyse sales team productivity metrics                              â”‚
â”‚  â€¢ Check pipeline conversion rates                                      â”‚
â”‚                                                          [Dismiss] [ACK] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â„¹ï¸ INFO - R&D Ratio Approaching Target                                 â”‚
â”‚  R&D Ratio has improved to 1.03, just 3% above the 1.0 target.         â”‚
â”‚  This is your best R&D performance in 18 months.                        â”‚
â”‚                                                                         â”‚
â”‚  Current: 1.03  â”‚  Target: â‰¥ 1.0  â”‚  Improvement: +17% YoY              â”‚
â”‚                                                          [Dismiss] [ACK] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Alert Severity Levels:**
1. **Critical (Red):** Below target for 3+ consecutive months
2. **Warning (Amber):** Declining trend that will breach target within 3 months
3. **Info (Blue):** Positive developments or approaching milestones
4. **Success (Green):** New records or sustained performance

**Implementation:**
```typescript
interface Alert {
  severity: 'critical' | 'warning' | 'info' | 'success'
  ratio: 'ps' | 'sales' | 'maintenance' | 'rd' | 'ga'
  title: string
  description: string
  trend: number // % change per month
  forecastImpact?: string
  actions?: string[]
  dismissible: boolean
  acknowledged: boolean
}

function detectAlerts(data: CSIRatiosData[], config: RatioConfig[]): Alert[] {
  // Check for declining trends
  // Check for threshold breaches
  // Check for streaks (positive/negative)
  // Check forecast vs actual variances
  // Return prioritised alert list
}
```

**Reference:** PagerDuty's incident alerts, Datadog's monitors

---

### ğŸŸ¢ Enhancement: Trend Prediction Warnings

**Pattern:** Use simple regression to predict when thresholds will be crossed.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Predictive Alert                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš ï¸ G&A Ratio May Breach Target in Q2 2026                              â”‚
â”‚                                                                         â”‚
â”‚  Based on the last 6 months of data, G&A Ratio is increasing at        â”‚
â”‚  0.3% per month. If this trend continues, you will exceed the 20%      â”‚
â”‚  target threshold by May 2026.                                          â”‚
â”‚                                                                         â”‚
â”‚  Current trajectory:                                                    â”‚
â”‚  20% â”¼â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â—â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€  Target                  â”‚
â”‚  19% â”¤                   â•±                                              â”‚
â”‚  18% â”¤             â—â”€â”€â”€â”€â”€                                               â”‚
â”‚  17% â”¤       â—â”€â”€â”€â”€â”€â”˜                                                    â”‚
â”‚  16% â”¤ â—â”€â”€â”€â”€â”€â”˜                                                          â”‚
â”‚       Dec   Jan   Feb   Mar   Apr   May                                 â”‚
â”‚       2025                       2026                                   â”‚
â”‚                                                                         â”‚
â”‚  Confidence: Medium (RÂ² = 0.76)                                         â”‚
â”‚  Time to breach: ~5 months                                              â”‚
â”‚                                                                         â”‚
â”‚  [View Details] [Create Action Item] [Dismiss]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation:**
```typescript
function predictThresholdBreach(
  historicalData: number[],
  target: number,
  comparison: 'gte' | 'lte'
): PredictiveAlert | null {
  // Simple linear regression
  const regression = calculateLinearRegression(historicalData)

  // Project forward month by month
  let monthsUntilBreach = 0
  let currentValue = historicalData[historicalData.length - 1]

  while (monthsUntilBreach < 24) { // Max 24 months ahead
    currentValue += regression.slope

    if (comparison === 'gte' && currentValue < target) {
      return createAlert(monthsUntilBreach, regression.rSquared)
    }
    if (comparison === 'lte' && currentValue > target) {
      return createAlert(monthsUntilBreach, regression.rSquared)
    }

    monthsUntilBreach++
  }

  return null // No breach predicted in next 24 months
}
```

**Reference:** Tesla's battery degradation predictions, Nest's learning thermostat

---

## 8. Implementation Roadmap

### Phase 1 (MVP) - Core Multi-Year Support
**Timeline:** 2-3 weeks
**Priority:** ğŸ”´ Critical

1. âœ“ Dual-year comparison cards
2. âœ“ Forecast vs actual badges
3. âœ“ YTD comparison table
4. âœ“ Interactive month selector
5. âœ“ Inline sparklines in ratio cards
6. âœ“ Overall health score card

**Dependencies:**
- Backend API updates to return multi-year data
- Database schema to store forecast flags
- TypeScript interfaces for new data structures

---

### Phase 2 (Enhanced) - Advanced Analytics
**Timeline:** 2-3 weeks
**Priority:** ğŸŸ¡ Important

1. âœ“ Monthly trend chart modal
2. âœ“ Variance tracking panel
3. âœ“ Rolling averages section
4. âœ“ Side-by-side year comparison table
5. âœ“ Automated insights panel
6. âœ“ Threshold alert system

**Dependencies:**
- Insights generation algorithm
- Alert notification system
- Chart library configuration (Recharts)

---

### Phase 3 (Advanced) - Polish & Extras
**Timeline:** 1-2 weeks
**Priority:** ğŸŸ¢ Enhancement

1. âœ“ Heat map calendar view
2. âœ“ Confidence interval visualisation
3. âœ“ Best/worst performing months
4. âœ“ Export & reporting system
5. âœ“ Quarterly summary table
6. âœ“ Trend prediction warnings

**Dependencies:**
- Export library setup (PDF/Excel/PPT)
- Regression/prediction algorithms
- Performance optimisation for large datasets

---

## 9. Technical Specifications

### Data Structure Requirements

```typescript
// Enhanced CSI Ratios Data Structure
interface CSIRatiosDataEnhanced {
  // Current period (existing)
  ratios: {
    ps: RatioValue
    sales: RatioValue
    maintenance: RatioValue
    rd: RatioValue
    ga: RatioValue
  }
  period: {
    year: number
    month: number
    monthName: string
    dataType: 'actual' | 'forecast' // NEW
    confidenceInterval?: { lower: number; upper: number } // NEW for forecasts
  }
  underlying: UnderlyingData

  // NEW: Historical data for trends
  historical: {
    year: number
    month: number
    ratios: {
      ps: RatioValue
      sales: RatioValue
      maintenance: RatioValue
      rd: RatioValue
      ga: RatioValue
    }
    underlying: UnderlyingData
    dataType: 'actual' | 'forecast'
  }[]

  // NEW: Calculated metrics
  insights: Insight[]
  alerts: Alert[]
  healthScore: {
    current: number
    previous: number
    yoyPrevious: number
    breakdown: { ratio: string; contribution: number }[]
  }

  // NEW: Comparisons
  comparisons: {
    yoy: { [key: string]: number } // Year-over-year deltas
    mom: { [key: string]: number } // Month-over-month deltas
    ytd: { [key: string]: number } // Year-to-date averages
  }
}

interface RatioValue {
  value: number
  status: 'green' | 'amber' | 'red'
  target: number
  comparison: 'gte' | 'lte'

  // NEW
  dataType?: 'actual' | 'forecast'
  confidenceInterval?: { lower: number; upper: number }
  trend?: {
    direction: 'up' | 'down' | 'stable'
    percentage: number
    streak: number // Consecutive months of same direction
  }
  ranking?: {
    current: number
    total: number
    percentile: number
  }
}

interface Insight {
  id: string
  type: 'positive' | 'negative' | 'neutral'
  category: 'yoy' | 'mom' | 'streak' | 'ranking' | 'forecast' | 'anomaly'
  priority: 'high' | 'medium' | 'low'
  title: string
  description: string
  actionable: boolean
  actions?: string[]
  relatedRatio?: string
  timestamp: Date
}

interface Alert {
  id: string
  severity: 'critical' | 'warning' | 'info' | 'success'
  ratio: 'ps' | 'sales' | 'maintenance' | 'rd' | 'ga'
  title: string
  description: string
  trend?: number
  forecastImpact?: string
  actions?: string[]
  dismissible: boolean
  acknowledged: boolean
  createdAt: Date
  expiresAt?: Date
}
```

---

### API Endpoints Required

```typescript
// GET /api/analytics/burc/csi-ratios
// Enhanced to return multi-year data
interface CSIRatiosRequest {
  year?: number // Optional: default to current year
  month?: number // Optional: default to latest available
  includeHistorical?: boolean // Default: true
  historicalMonths?: number // Default: 24 (2 years)
  includeComparisons?: boolean // Default: true
  includeInsights?: boolean // Default: true
}

// GET /api/analytics/burc/csi-ratios/export
// Export data in various formats
interface ExportRequest {
  format: 'csv' | 'excel' | 'pdf' | 'pptx'
  startDate: string // YYYY-MM-DD
  endDate: string // YYYY-MM-DD
  includeCharts: boolean
  includeTables: boolean
  includeInsights: boolean
}

// POST /api/analytics/burc/csi-ratios/alerts/acknowledge
// Mark an alert as acknowledged
interface AcknowledgeAlertRequest {
  alertId: string
  userId: string
  notes?: string
}

// GET /api/analytics/burc/csi-ratios/insights
// Get generated insights for a period
interface InsightsRequest {
  year: number
  month: number
  includeHistorical?: boolean
}
```

---

### Performance Considerations

1. **Data Loading Strategy**
   - Use React Query for caching (already in dependencies: `@tanstack/react-query`)
   - Cache duration: 5 minutes for current data, 1 hour for historical
   - Implement pagination for large historical datasets

2. **Rendering Optimisation**
   - Use `@tanstack/react-virtual` for large tables (already in dependencies)
   - Lazy load chart components
   - Memoize expensive calculations with `useMemo`
   - Debounce month selector changes (300ms)

3. **Chart Performance**
   - Limit sparklines to 12-24 data points max
   - Use SVG for small charts, Canvas for large datasets
   - Implement progressive loading for trend modals

4. **Bundle Size**
   - Code-split chart components
   - Lazy load export functionality
   - Use tree-shaking for unused Recharts components

**Example:**
```typescript
// Lazy load chart modal
const TrendChartModal = lazy(() => import('./TrendChartModal'))

// Memoize health score calculation
const healthScore = useMemo(
  () => calculateHealthScore(ratios),
  [ratios]
)

// React Query caching
const { data, isLoading } = useQuery({
  queryKey: ['csi-ratios', year, month],
  queryFn: () => fetchCSIRatios({ year, month, includeHistorical: true }),
  staleTime: 5 * 60 * 1000, // 5 minutes
  cacheTime: 60 * 60 * 1000, // 1 hour
})
```

---

### Accessibility Standards

All recommendations follow WCAG 2.1 Level AA standards:

1. **Colour Contrast**
   - Green: `#10b981` on white = 3.9:1 (AA for large text)
   - Amber: `#f59e0b` on white = 2.8:1 (requires dark text fallback)
   - Red: `#ef4444` on white = 3.6:1 (AA for large text)
   - Use text labels in addition to colour (e.g., "âœ“ Met", "âœ— Below")

2. **Keyboard Navigation**
   - All interactive elements accessible via Tab
   - Month selector: Arrow keys to navigate months
   - Ratio cards: Enter to open detail modal
   - Tables: Arrow keys for cell navigation

3. **Screen Reader Support**
   - Use `aria-label` for icon-only buttons
   - Announce chart data via `<table role="presentation">` fallback
   - Use `aria-live="polite"` for dynamic insight updates
   - Provide alt text for visual indicators

4. **Focus Management**
   - Visible focus indicators (2px outline)
   - Trap focus in modals
   - Return focus to trigger element on modal close

**Example:**
```typescript
// Accessible ratio card
<div
  role="button"
  tabIndex={0}
  aria-label={`${config.label}: ${formatRatioValue(config.key, ratio.value)}. Status: ${ratio.status}. Click for details.`}
  onKeyDown={(e) => e.key === 'Enter' && openDetailModal()}
>
  {/* Card content */}
</div>

// Screen reader chart fallback
<div aria-hidden="true">
  <LineChart data={trendData} />
</div>
<table className="sr-only" role="presentation">
  <caption>PS Ratio Monthly Trend Data</caption>
  <thead>
    <tr><th>Month</th><th>Value</th></tr>
  </thead>
  <tbody>
    {trendData.map(d => (
      <tr key={d.month}>
        <td>{d.month}</td>
        <td>{d.value}</td>
      </tr>
    ))}
  </tbody>
</table>
```

---

### Responsive Design Breakpoints

```typescript
// Tailwind CSS breakpoints (already configured)
const breakpoints = {
  sm: '640px',   // Mobile landscape
  md: '768px',   // Tablet
  lg: '1024px',  // Desktop
  xl: '1280px',  // Large desktop
  '2xl': '1536px' // Extra large
}

// Component-specific responsive patterns
const responsiveLayouts = {
  ratioCards: {
    sm: 'grid-cols-1',     // Stack on mobile
    md: 'grid-cols-2',     // 2 columns on tablet
    lg: 'grid-cols-5',     // 5 columns on desktop (current)
  },
  comparisonView: {
    sm: 'flex-col',        // Stack years vertically on mobile
    lg: 'flex-row',        // Side-by-side on desktop
  },
  comparisonTable: {
    sm: 'overflow-x-auto', // Horizontal scroll on mobile
    lg: 'overflow-visible', // Full table on desktop
  },
  insights: {
    sm: 'text-sm p-3',     // Compact on mobile
    lg: 'text-base p-6',   // Spacious on desktop
  }
}
```

---

## 10. Design System Integration

### Colour Palette (Existing)

Maintain consistency with existing BURC components:

```typescript
const colours = {
  // Status colours (existing)
  green: {
    50: '#f0fdf4',
    100: '#dcfce7',
    200: '#bbf7d0',
    500: '#22c55e',
    600: '#16a34a',
    700: '#15803d'
  },
  amber: {
    50: '#fffbeb',
    100: '#fef3c7',
    200: '#fde68a',
    500: '#f59e0b',
    600: '#d97706',
    700: '#b45309'
  },
  red: {
    50: '#fef2f2',
    100: '#fee2e2',
    200: '#fecaca',
    500: '#ef4444',
    600: '#dc2626',
    700: '#b91c1c'
  },

  // NEW: Data type indicators
  actual: {
    bg: '#3b82f6',    // blue-500
    text: '#ffffff',
    border: '#2563eb' // blue-600
  },
  forecast: {
    bg: '#ffffff',
    text: '#9333ea',   // purple-600
    border: '#9333ea',
    borderStyle: 'dashed'
  },

  // Chart colours (for multi-line charts)
  chart: {
    primary: '#3b82f6',   // blue-500 (2025 data)
    secondary: '#64748b', // slate-500 (2024 data)
    tertiary: '#8b5cf6',  // violet-500 (3rd line)
    target: '#6b7280',    // gray-500 (threshold lines)
    confidence: '#e0e7ff' // indigo-100 (confidence bands)
  }
}
```

---

### Typography Scale (Existing)

Maintain existing type hierarchy:

```typescript
const typography = {
  // Headings
  h1: 'text-3xl font-bold text-gray-900',
  h2: 'text-2xl font-semibold text-gray-900',
  h3: 'text-xl font-semibold text-gray-900',
  h4: 'text-lg font-medium text-gray-900',

  // Body text
  body: 'text-base text-gray-700',
  bodySmall: 'text-sm text-gray-600',
  caption: 'text-xs text-gray-500',

  // Special
  metric: 'text-3xl font-bold tabular-nums', // Large numbers
  metricSmall: 'text-2xl font-bold tabular-nums',
  code: 'font-mono text-xs', // Formulas

  // NEW: Insights/alerts
  insightTitle: 'text-base font-semibold text-gray-900',
  insightBody: 'text-sm text-gray-700 leading-relaxed',
  alertTitle: 'text-sm font-semibold',
  alertBody: 'text-sm leading-relaxed'
}
```

---

### Spacing System (Existing)

Follow Tailwind's 8px base unit:

```typescript
const spacing = {
  xs: '4px',    // 0.5 rem
  sm: '8px',    // 1 rem
  md: '16px',   // 2 rem
  lg: '24px',   // 3 rem
  xl: '32px',   // 4 rem
  '2xl': '48px', // 6 rem

  // Component-specific
  cardPadding: '16px',     // p-4
  cardGap: '16px',         // gap-4
  sectionGap: '24px',      // space-y-6
  modalPadding: '24px',    // p-6
}
```

---

### Animation Standards

Use subtle, purposeful animations:

```typescript
const animations = {
  // Transitions
  default: 'transition-all duration-200 ease-in-out',
  slow: 'transition-all duration-500 ease-in-out',

  // Hover states
  hover: 'hover:shadow-md transition-shadow',
  hoverScale: 'hover:scale-105 transition-transform duration-200',

  // Loading states
  pulse: 'animate-pulse',
  spin: 'animate-spin',

  // NEW: Chart animations
  chartEnter: {
    initial: { opacity: 0, y: 20 },
    animate: { opacity: 1, y: 0 },
    transition: { duration: 0.3 }
  },

  // NEW: Insight cards
  slideIn: {
    initial: { opacity: 0, x: -20 },
    animate: { opacity: 1, x: 0 },
    transition: { duration: 0.3, delay: 0.1 }
  }
}
```

**Example with Framer Motion (in dependencies):**
```typescript
import { motion } from 'framer-motion'

<motion.div
  initial={{ opacity: 0, y: 20 }}
  animate={{ opacity: 1, y: 0 }}
  transition={{ duration: 0.3 }}
>
  <InsightCard insight={insight} />
</motion.div>
```

---

## 11. References & Inspiration

### Industry Best Practices

1. **Bloomberg Terminal**
   - Multi-year comparison views with toggle controls
   - Heat maps for quick pattern recognition
   - Forecast confidence bands
   - [Reference: Bloomberg Professional Services]

2. **Stripe Dashboard**
   - Clean metric cards with inline sparklines
   - Colour-coded status indicators
   - Smooth animations and transitions
   - [Reference: https://stripe.com/docs/api]

3. **Tableau Public**
   - Interactive dual-axis time series charts
   - Drill-down from summary to detail
   - Export to multiple formats
   - [Reference: https://public.tableau.com/]

4. **Power BI**
   - YTD/YoY comparison tables
   - Automated insights generation
   - Forecast vs actual variance tracking
   - [Reference: Microsoft Power BI Samples]

5. **Linear**
   - Keyboard-first navigation
   - Subtle, purposeful animations
   - Status badges and indicators
   - [Reference: https://linear.app]

6. **Notion**
   - Expandable/collapsible sections
   - Clean table views
   - Modal overlays for detailed data
   - [Reference: https://notion.so]

---

### Academic References

1. **Financial Dashboard Design**
   - Few, S. (2013). "Information Dashboard Design: Displaying Data for At-a-Glance Monitoring" (2nd ed.)
   - Recommendation: Minimise chart junk, maximise data-ink ratio

2. **Time Series Visualisation**
   - Tufte, E. (2001). "The Visual Display of Quantitative Information"
   - Recommendation: Use small multiples for comparisons

3. **Forecast Uncertainty**
   - Spiegelhalter, D. (2019). "The Art of Statistics"
   - Recommendation: Always show uncertainty ranges for forecasts

4. **Colour Theory for Data**
   - Ware, C. (2019). "Information Visualization: Perception for Design" (4th ed.)
   - Recommendation: Use sequential colour schemes for ordered data

---

## 12. Success Metrics

### User Engagement Metrics

Track these metrics post-implementation:

1. **Adoption Rate**
   - % of users who interact with new features (target: >60% in first month)
   - Most-used features (track click events)

2. **Time-to-Insight**
   - Measure: Time from page load to first insight interaction
   - Target: <10 seconds average

3. **Feature Usage**
   - YoY comparison views: Target >50% of sessions
   - Trend charts: Target >30% of sessions
   - Export functionality: Target >10% of sessions
   - Alert acknowledgments: Target 100% within 48 hours

4. **User Satisfaction**
   - NPS score for financials page (baseline vs post-implementation)
   - User interviews (qualitative feedback)

---

### Performance Metrics

1. **Page Load Performance**
   - Initial render: <2 seconds
   - Time to interactive: <3 seconds
   - Largest Contentful Paint (LCP): <2.5 seconds

2. **Chart Rendering**
   - Sparklines: <100ms per card
   - Full trend chart: <500ms
   - Heat map: <300ms

3. **Data Freshness**
   - API response time: <500ms
   - Cache hit rate: >80%
   - Real-time updates: <5 second latency

---

## Appendix A: ASCII Art Reference

### Component Layout Examples

**Full Page Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Key Insights (Automated)                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Overall Health Score + YTD Summary                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚  PS  â”‚ Salesâ”‚ Maintâ”‚ R&D  â”‚ G&A  â”‚ â† Ratio cards with sparklines    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  YoY Comparison Table (Collapsible)                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Heat Map Calendar View                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Underlying Financial Data (Existing)                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Appendix B: Implementation Checklist

### Phase 1 Checklist

- [ ] Backend API: Add `dataType` field to CSI ratios response
- [ ] Backend API: Return 24 months of historical data
- [ ] Frontend: Update TypeScript interfaces
- [ ] Frontend: Add forecast vs actual badges
- [ ] Frontend: Implement dual-year comparison cards
- [ ] Frontend: Add sparklines to ratio cards
- [ ] Frontend: Create health score calculation logic
- [ ] Frontend: Build YTD comparison table
- [ ] Frontend: Enhance month/year selector
- [ ] Testing: Unit tests for health score calculation
- [ ] Testing: E2E tests for year navigation
- [ ] Documentation: Update component docs

### Phase 2 Checklist

- [ ] Backend API: Insights generation endpoint
- [ ] Backend API: Variance tracking data
- [ ] Frontend: Build trend chart modal component
- [ ] Frontend: Implement variance tracking panel
- [ ] Frontend: Add rolling averages section
- [ ] Frontend: Create side-by-side comparison table
- [ ] Frontend: Build automated insights panel
- [ ] Frontend: Implement threshold alert system
- [ ] Testing: Unit tests for insights generation
- [ ] Testing: Integration tests for alerts
- [ ] Performance: Optimise chart rendering
- [ ] Documentation: User guide for new features

### Phase 3 Checklist

- [ ] Frontend: Build heat map calendar view
- [ ] Frontend: Add confidence interval visualisation
- [ ] Frontend: Implement best/worst months section
- [ ] Frontend: Create export modal component
- [ ] Backend: PDF generation service
- [ ] Backend: Excel export service
- [ ] Frontend: Build quarterly summary table
- [ ] Frontend: Implement trend prediction warnings
- [ ] Testing: Export functionality tests
- [ ] Performance: Large dataset optimisation
- [ ] Accessibility: WCAG 2.1 AA audit
- [ ] Documentation: Complete user documentation

---

## Appendix C: Database Schema Requirements

**New table for forecast data:**
```sql
CREATE TABLE csi_ratios_forecast (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  year INTEGER NOT NULL,
  month INTEGER NOT NULL,
  ratio_type TEXT NOT NULL, -- 'ps', 'sales', 'maintenance', 'rd', 'ga'
  forecast_value NUMERIC(10,2) NOT NULL,
  confidence_lower NUMERIC(10,2),
  confidence_upper NUMERIC(10,2),
  forecast_method TEXT, -- 'regression', 'budget', 'manual'
  created_at TIMESTAMP DEFAULT NOW(),
  created_by UUID REFERENCES users(id),

  CONSTRAINT unique_forecast UNIQUE (year, month, ratio_type)
);

-- Index for performance
CREATE INDEX idx_csi_forecast_period
  ON csi_ratios_forecast (year, month);
```

**New table for insights/alerts:**
```sql
CREATE TABLE csi_ratios_insights (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  year INTEGER NOT NULL,
  month INTEGER NOT NULL,
  insight_type TEXT NOT NULL, -- 'yoy', 'mom', 'streak', 'ranking', 'anomaly'
  severity TEXT NOT NULL, -- 'critical', 'warning', 'info', 'success'
  title TEXT NOT NULL,
  description TEXT NOT NULL,
  ratio_affected TEXT,
  actionable BOOLEAN DEFAULT false,
  actions JSONB,
  dismissed BOOLEAN DEFAULT false,
  acknowledged BOOLEAN DEFAULT false,
  acknowledged_by UUID REFERENCES users(id),
  acknowledged_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  expires_at TIMESTAMP
);

-- Index for active insights
CREATE INDEX idx_csi_insights_active
  ON csi_ratios_insights (year, month, dismissed, expires_at);
```

---

## Document Revision History

| Version | Date       | Author | Changes                          |
|---------|------------|--------|----------------------------------|
| 1.0     | 2025-12-29 | Claude | Initial comprehensive analysis   |

---

**End of Document**

*For questions or clarifications, please refer to the implementation roadmap (Section 8) or contact the product team.*
